{
  "caseId": "01_single_run_with_revision_and_wizard",
  "session": {
    "createdAtIso": "2026-03-01T00:00:00.000Z",
    "events": [
      {
        "atIso": "2026-03-01T00:00:00.000Z",
        "type": "CREATED"
      },
      {
        "atIso": "2026-03-01T00:00:00.000Z",
        "runId": "run_golden_01",
        "type": "RUN_ATTACHED"
      },
      {
        "atIso": "2026-03-01T00:00:00.000Z",
        "revisionId": "rev_01_single_run_with_revision_and_wizard",
        "runId": "run_golden_01",
        "type": "REVISION_ATTACHED"
      },
      {
        "atIso": "2026-03-01T00:00:00.000Z",
        "hash": "9000530522e3d7b0ee32ff52904ab9d1f222c6fb501f12cc97bf92e0c46ff93e",
        "runIdsUsed": [
          "run_golden_01"
        ],
        "type": "WIZARD_OUTPUT_BUILT"
      }
    ],
    "inputsSummary": {},
    "inputsV1": {},
    "kind": "WIZARD",
    "projectId": "p_golden_01",
    "reportId": "rs_golden_01",
    "revisions": [
      {
        "createdAtIso": "2026-03-01T00:00:00.000Z",
        "downloadUrl": "/api/projects/p_golden_01/reports/internal-engineering/rev_01_single_run_with_revision_and_wizard.html",
        "format": "HTML",
        "revisionId": "rev_01_single_run_with_revision_and_wizard",
        "runId": "run_golden_01"
      }
    ],
    "runIds": [
      "run_golden_01"
    ],
    "status": "HAS_WIZARD_OUTPUT",
    "title": "Golden Session 01",
    "updatedAtIso": "2026-03-01T00:00:00.000Z",
    "warnings": [],
    "wizardOutputV1": {
      "approxBytes": 23074,
      "generatedAtIso": "2026-03-01T00:00:00.000Z",
      "hash": "9000530522e3d7b0ee32ff52904ab9d1f222c6fb501f12cc97bf92e0c46ff93e",
      "kind": "INLINE",
      "revisionIdsUsed": [
        "rev_01_single_run_with_revision_and_wizard"
      ],
      "runIdsUsed": "[Circular]",
      "wizardOutput": {
        "charts": [],
        "claimsPolicyV1": {
          "allowedClaims": {
            "canClaimAnnualUsdSavings": false,
            "canClaimDemandSavings": false,
            "canClaimEmissionsAvoided": true,
            "canRecommendBatterySizing": false,
            "canRecommendTariffSwitch": true
          },
          "blockedReasons": [
            "requiredInputsMissing:Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas.",
            "requiredInputsMissing:Customer segment/type required to match many utility/ISO programs",
            "requiredInputsMissing:Customer type required for this program (segment-gated).",
            "requiredInputsMissing:Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance.",
            "requiredInputsMissing:Interval data reference required for load shape, load shifting, and demand response eligibility",
            "requiredInputsMissing:NAICS code required for this program.",
            "requiredInputsMissing:NAICS code required to match many utility/ISO programs",
            "requiredInputsMissing:Weather series not available; provide weather data or configure provider."
          ],
          "requiredNextData": [
            {
              "code": "required:Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas.",
              "label": "Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas."
            },
            {
              "code": "required:Customer segment/type required to match many utility/ISO programs",
              "label": "Customer segment/type required to match many utility/ISO programs"
            },
            {
              "code": "required:Customer type required for this program (segment-gated).",
              "label": "Customer type required for this program (segment-gated)."
            },
            {
              "code": "required:Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance.",
              "label": "Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance."
            },
            {
              "code": "required:Interval data reference required for load shape, load shifting, and demand response eligibility",
              "label": "Interval data reference required for load shape, load shifting, and demand response eligibility"
            },
            {
              "code": "required:NAICS code required for this program.",
              "label": "NAICS code required for this program."
            },
            {
              "code": "required:NAICS code required to match many utility/ISO programs",
              "label": "NAICS code required to match many utility/ISO programs"
            },
            {
              "code": "required:Weather series not available; provide weather data or configure provider.",
              "label": "Weather series not available; provide weather data or configure provider."
            }
          ],
          "status": "LIMITED"
        },
        "dataQuality": {
          "missingInfoIds": [
            "behaviorV2.baseLoadDrift.unavailable",
            "behaviorV2.insufficientCycles",
            "behaviorV2.peaks.missing",
            "behaviorV2.weekendShare.insufficientMonths",
            "behaviorV3.electric.insufficientMonths",
            "billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
            "billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
            "determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY",
            "determinants.reconcile.billingRecords.missing",
            "determinants.reconcile.coverageLow.2026-01",
            "determinants.reconcile.coverageLow.2026-02",
            "determinants.reconcile.reconcilable.count",
            "determinants.tou.energy.coverage.low.2026-01",
            "determinants.tou.energy.coverage.low.2026-02",
            "loadAttribution.weather.missing",
            "supply.v1.lse_undetected",
            "tariff.applicability.voltage.unknown",
            "weather.interval.temperature.missing"
          ],
          "score0to100": 80,
          "warnings": [
            "missing:behaviorV2.baseLoadDrift.unavailable",
            "missing:behaviorV2.insufficientCycles",
            "missing:behaviorV2.peaks.missing",
            "missing:behaviorV2.weekendShare.insufficientMonths",
            "missing:behaviorV3.electric.insufficientMonths",
            "missing:billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
            "missing:billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
            "missing:determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY",
            "missing:determinants.reconcile.billingRecords.missing",
            "missing:determinants.reconcile.coverageLow.2026-01"
          ]
        },
        "findings": [
          {
            "confidence0to1": 0.9,
            "evidenceRefs": [
              "analysisRun:run_golden_01:reportJson.missingInfo"
            ],
            "id": "missing_info",
            "severity": "warning",
            "summaryBullets": [
              "Missing IDs: behaviorV2.baseLoadDrift.unavailable, behaviorV2.insufficientCycles, behaviorV2.peaks.missing, behaviorV2.weekendShare.insufficientMonths, behaviorV3.electric.insufficientMonths, billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT, billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT, determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY, determinants.reconcile.billingRecords.missing, determinants.reconcile.coverageLow.2026-01, determinants.reconcile.coverageLow.2026-02, determinants.reconcile.reconcilable.count…"
            ],
            "title": "Missing info (reduces certainty)"
          },
          {
            "confidence0to1": 0.75,
            "evidenceRefs": [
              "analysisRun:run_golden_01:reportJson.summary.json.rateFit.status"
            ],
            "id": "rate_fit",
            "severity": "warning",
            "summaryBullets": [
              "Status: ok"
            ],
            "title": "Rate fit status"
          },
          {
            "confidence0to1": 0.7,
            "evidenceRefs": [
              "analysisRun:run_golden_01:reportJson.batteryDecisionPackV1_2"
            ],
            "id": "battery_screening",
            "severity": "info",
            "summaryBullets": [
              "Recommendation tier: DO_NOT_PROCEED",
              "Selected candidate: CAND_50KW_1H"
            ],
            "title": "Battery screening"
          },
          {
            "confidence0to1": 0.8,
            "evidenceRefs": [
              "analysisRun:run_golden_01:reportJson.summary.json.building.currentRateCode"
            ],
            "id": "current_rate",
            "severity": "info",
            "summaryBullets": [
              "Rate: B-19"
            ],
            "title": "Current rate code"
          },
          {
            "confidence0to1": 0.95,
            "evidenceRefs": [
              "analysisRun:run_golden_01:session.inputsSummary"
            ],
            "id": "dq_inputs",
            "severity": "info",
            "summaryBullets": [
              "Score: 80/100",
              "Intervals: present",
              "Bill text: present",
              "Address: missing"
            ],
            "title": "Data completeness"
          },
          {
            "confidence0to1": 0.1,
            "evidenceRefs": [
              "analysisRun:run_golden_01:workflow.utility.insights.supplyStructure"
            ],
            "id": "supply_structure",
            "severity": "info",
            "summaryBullets": [
              "Supply type: unknown",
              "Confidence: 0.1"
            ],
            "title": "Supply structure"
          },
          {
            "confidence0to1": 0.85,
            "evidenceRefs": [
              "analysisRun:run_golden_01:reportJson.truthSnapshotV1"
            ],
            "id": "truth_building_story",
            "severity": "info",
            "summaryBullets": [
              "Truth Engine confidence: A"
            ],
            "title": "Building story (Truth Engine v1)"
          },
          {
            "confidence0to1": 0.85,
            "evidenceRefs": [
              "analysisRun:run_golden_01:reportJson.project.territory"
            ],
            "id": "utility_territory",
            "severity": "info",
            "summaryBullets": [
              "Territory: PGE"
            ],
            "title": "Utility territory"
          }
        ],
        "missingInfoSummary": {
          "recommended": [
            {
              "category": "tariff",
              "description": "Base load drift unavailable (insufficient reconcilable months).",
              "id": "behaviorV2.baseLoadDrift.unavailable",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Insufficient reconcilable overlap cycles for multi-year behavior insights (need >= 12).",
              "id": "behaviorV2.insufficientCycles",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Peak timing unavailable (missing determinant timestamps for kW maxima).",
              "id": "behaviorV2.peaks.missing",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Weekend share comparison requires >= 24 reconcilable months.",
              "id": "behaviorV2.weekendShare.insufficientMonths",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Insufficient reconcilable overlap months for electric behavior insights (need >= 12).",
              "id": "behaviorV3.electric.insufficientMonths",
              "severity": "RECOMMENDED"
            },
            {
              "category": "billing",
              "description": "TOU kW buckets were not explicitly labeled (need at least two of: Peak/Off-Peak/Partial-Peak/Super-Off-Peak kW).",
              "details": {
                "reasonCode": "BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
                "source": "bill_pdf"
              },
              "id": "billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
              "severity": "RECOMMENDED"
            },
            {
              "category": "billing",
              "description": "TOU kWh buckets were not explicitly labeled (need at least two of: Peak/Off-Peak/Partial-Peak/Super-Off-Peak kWh).",
              "details": {
                "reasonCode": "BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
                "source": "bill_pdf"
              },
              "id": "billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "PG&E demand ratchet requires prior-month demand history (11 month window). Provide prior billing cycles or usage history to compute ratchet floor.",
              "details": {
                "historyWindowCycles": 11,
                "reasonCode": "DETERMINANT_RATCHET_NEEDS_HISTORY"
              },
              "id": "determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Billing records missing for reconciliation.",
              "id": "determinants.reconcile.billingRecords.missing",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Insufficient interval coverage to reconcile against billing record.",
              "details": {
                "billedKwh": null,
                "billedKwMax": null,
                "coveragePct": 0.03225806451612903,
                "expectedIntervals": 744,
                "firstIntervalTs": "2026-01-15T08:00:00.000Z",
                "lastIntervalTs": "2026-01-16T07:00:00.000Z",
                "missingPointCount": 720,
                "observedIntervals": 24
              },
              "id": "determinants.reconcile.coverageLow.2026-01",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Insufficient interval coverage to reconcile against billing record.",
              "details": {
                "billedKwh": null,
                "billedKwMax": null,
                "coveragePct": 0.03571428571428571,
                "expectedIntervals": 672,
                "firstIntervalTs": "2026-02-15T08:00:00.000Z",
                "lastIntervalTs": "2026-02-16T07:00:00.000Z",
                "missingPointCount": 648,
                "observedIntervals": 24
              },
              "id": "determinants.reconcile.coverageLow.2026-02",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Only 0 cycles were reconcilable due to limited overlap/coverage.",
              "details": {
                "reconciledCycleCount": 0
              },
              "id": "determinants.reconcile.reconcilable.count",
              "severity": "RECOMMENDED"
            },
            {
              "category": "billing",
              "description": "Insufficient interval coverage for TOU energy breakdown.",
              "details": {
                "coveragePct": 0.03225806451612903,
                "expectedIntervals": 744,
                "firstIntervalTs": "2026-01-15T08:00:00.000Z",
                "lastIntervalTs": "2026-01-16T07:00:00.000Z",
                "observedIntervals": 24
              },
              "id": "determinants.tou.energy.coverage.low.2026-01",
              "severity": "RECOMMENDED"
            },
            {
              "category": "billing",
              "description": "Insufficient interval coverage for TOU energy breakdown.",
              "details": {
                "coveragePct": 0.03571428571428571,
                "expectedIntervals": 672,
                "firstIntervalTs": "2026-02-15T08:00:00.000Z",
                "lastIntervalTs": "2026-02-16T07:00:00.000Z",
                "observedIntervals": 24
              },
              "id": "determinants.tou.energy.coverage.low.2026-02",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Weather data missing in interval export; load attribution unavailable.",
              "id": "loadAttribution.weather.missing",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "LSE (CCA/DA provider) could not be detected from bill text.",
              "id": "supply.v1.lse_undetected",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Voltage level (secondary/primary/transmission) is unknown; provide meter metadata or bill text that indicates service voltage.",
              "id": "tariff.applicability.voltage.unknown",
              "severity": "RECOMMENDED"
            },
            {
              "category": "tariff",
              "description": "Weather data missing in interval export; load attribution unavailable. Include Avg. Temperature in interval export when available.",
              "id": "weather.interval.temperature.missing",
              "severity": "RECOMMENDED"
            }
          ],
          "required": [],
          "warnings": []
        },
        "opportunities": [
          {
            "confidence0to1": 0.65,
            "id": "opp_battery",
            "prerequisites": [],
            "risks": [],
            "tier": "DO_NOT_PROCEED",
            "title": "Battery opportunity (screening)"
          }
        ],
        "provenance": {
          "engineVersions": {},
          "generatedAtIso": "2026-03-01T00:00:00.000Z",
          "projectId": "p_golden_01",
          "reportId": "rs_golden_01",
          "revisionIdsUsed": [
            "rev_01_single_run_with_revision_and_wizard"
          ],
          "runIdsUsed": [
            "run_golden_01"
          ]
        },
        "verifierResultV1": {
          "checks": [
            {
              "code": "verifier.econ.sum_mismatch",
              "details": {
                "delta": 0,
                "sumLineItems": 0,
                "total": 0
              },
              "message": "Battery economics reconcile within tolerance.",
              "paths": [
                "reportJson.batteryDecisionPackV1_2.audit.reconcile"
              ],
              "status": "PASS",
              "tolerance": 0.01
            }
          ],
          "generatedAtIso": "2026-03-01T00:00:00.000Z",
          "status": "PASS",
          "summary": {
            "failCount": 0,
            "passCount": 1,
            "warnCount": 0
          }
        },
        "wizardOutputHash": "9000530522e3d7b0ee32ff52904ab9d1f222c6fb501f12cc97bf92e0c46ff93e",
        "wizardSteps": [
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Optional context that improves auditability and downstream reporting.",
            "id": "project_metadata",
            "requiredActions": [
              {
                "actionId": "project_metadata.ADD_PROJECT_METADATA",
                "apiHint": {
                  "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-project-metadata",
                  "method": "POST",
                  "payloadExample": {
                    "address": "123 Main St, City, CA",
                    "meterId": "optional",
                    "utilityHint": "PGE"
                  }
                },
                "label": "Add address and utility account identifiers",
                "required": false,
                "status": "OPTIONAL",
                "type": "ADD_PROJECT_METADATA"
              }
            ],
            "status": "OPTIONAL",
            "title": "Project metadata (optional)"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Used to extract rate labels, billing periods, and TOU hints when available.",
            "id": "bill_pdf",
            "requiredActions": [
              {
                "actionId": "bill_pdf.UPLOAD_BILL_PDF",
                "apiHint": {
                  "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/upload-bill",
                  "method": "POST",
                  "payloadExample": {
                    "file": "<multipart/form-data field: file>"
                  }
                },
                "label": "Upload bill PDF (extract bill text)",
                "required": false,
                "status": "DONE",
                "type": "UPLOAD_BILL_PDF"
              }
            ],
            "status": "DONE",
            "title": "Bill PDF"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Enables interval-derived load shape, demand, and battery feasibility signals.",
            "id": "interval_data",
            "requiredActions": [
              {
                "actionId": "interval_data.UPLOAD_INTERVAL_CSV",
                "apiHint": {
                  "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/upload-interval",
                  "method": "POST",
                  "payloadExample": {
                    "file": "<multipart/form-data field: file>"
                  }
                },
                "label": "Upload interval CSV (PG&E exports supported)",
                "required": false,
                "status": "DONE",
                "type": "UPLOAD_INTERVAL_CSV"
              }
            ],
            "status": "DONE",
            "title": "Interval data (CSV)"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Derived from stored interval/weather snapshots only: baseline expectations, residual maps, changepoints, and bounded anomaly ledger.",
            "id": "building_story",
            "requiredActions": [],
            "status": "DONE",
            "title": "Building story (Truth Engine v1)"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "• Frontier points: 4 (bounded)\n• Battery: backup-only (medium) — resilience value not monetized — $0/yr • capex=$171,188 • payback≈0.0y\n• Battery: backup-only (small) — resilience value not monetized — $0/yr • capex=$147,125 • payback≈0.0y\n• Battery: DR-ready mode (requires DR inputs) — $0/yr • capex=$0 • payback≈0.0y\n• Battery: hybrid (TOU + demand) — $0/yr • capex=$147,125 • payback≈0.0y\n• Battery: non-export / interconnection-limited mode — $0/yr • capex=$147,125 • payback≈0.0y\nBlocked scenarios:\n• Battery: demand shaving only — needs: billing_history_12_months, required:Billing cycle summary (start/end dates, demand/usage) requi…(truncated), required:Customer segment/type required to match many utility/ISO programs, required:Customer type required for this program (segment-gated).\nRequired next data (deduped): billing_history_12_months • required:Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas. • required:Customer segment/type required to match many utility/ISO programs • required:Customer type required for this program (segment-gated). • required:Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance. • required:Interval data reference required for load shape, load shifting, and demand response eligibility • required:NAICS code required for this program. • required:NAICS code required to match many utility/ISO programs • required:Weather series not available; provide weather data or configure provider.",
            "id": "opportunity_frontier",
            "requiredActions": [],
            "status": "DONE",
            "title": "Opportunity Frontier (Scenario Lab v1)"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Required to resolve tariff metadata deterministically when bill matching is unavailable/ambiguous.",
            "id": "rate_code",
            "requiredActions": [
              {
                "actionId": "rate_code.ENTER_RATE_CODE",
                "apiHint": {
                  "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-rate-code",
                  "method": "POST",
                  "payloadExample": {
                    "rateCode": "E-19"
                  }
                },
                "label": "Enter current rate code (e.g., E-19, B-19)",
                "required": true,
                "status": "DONE",
                "type": "ENTER_RATE_CODE"
              }
            ],
            "status": "DONE",
            "title": "Current rate code"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Improves generation/exit-fee context when analyzing CCA or Direct Access supply.",
            "id": "supply_provider",
            "requiredActions": [
              {
                "actionId": "supply_provider.SELECT_PROVIDER_TYPE",
                "apiHint": {
                  "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-provider",
                  "method": "POST",
                  "payloadExample": {
                    "providerType": "NONE"
                  }
                },
                "label": "Select supply provider type",
                "required": false,
                "status": "OPTIONAL",
                "type": "SELECT_PROVIDER_TYPE"
              }
            ],
            "status": "OPTIONAL",
            "title": "Supply provider type (CCA/DA/None)"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Selects vintage-specific PCIA deterministically when available.",
            "id": "pcia_vintage",
            "requiredActions": [
              {
                "actionId": "pcia_vintage.SET_PCIA_VINTAGE_KEY",
                "apiHint": {
                  "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-pcia-vintage-key",
                  "method": "POST",
                  "payloadExample": {
                    "pciaVintageKey": "2019"
                  }
                },
                "label": "Set PCIA vintage key (when known)",
                "required": false,
                "status": "OPTIONAL",
                "type": "SET_PCIA_VINTAGE_KEY"
              }
            ],
            "status": "OPTIONAL",
            "title": "PCIA vintage key (optional)"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Required inputs are missing; resolve required items or explicitly choose “Run anyway” to mark outputs as partial.",
            "id": "run_utility",
            "requiredActions": [],
            "status": "BLOCKED",
            "title": "Run Utility"
          },
          {
            "evidence": {
              "runId": "run_golden_01"
            },
            "helpText": "Builds a deterministic wizard artifact from stored run snapshots (no engine recompute on GET).",
            "id": "build_wizard_output",
            "requiredActions": [],
            "status": "DONE",
            "title": "Build wizard output"
          },
          {
            "evidence": {
              "revisionId": "rev_01_single_run_with_revision_and_wizard",
              "runId": "run_golden_01"
            },
            "helpText": "Optional: attach a rendered revision (HTML/PDF) for sharing.",
            "id": "generate_revision",
            "requiredActions": [],
            "status": "DONE",
            "title": "Generate revision"
          }
        ]
      }
    }
  },
  "wizardOutput": {
    "charts": [],
    "claimsPolicyV1": {
      "allowedClaims": {
        "canClaimAnnualUsdSavings": false,
        "canClaimDemandSavings": false,
        "canClaimEmissionsAvoided": true,
        "canRecommendBatterySizing": false,
        "canRecommendTariffSwitch": true
      },
      "blockedReasons": [
        "requiredInputsMissing:Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas.",
        "requiredInputsMissing:Customer segment/type required to match many utility/ISO programs",
        "requiredInputsMissing:Customer type required for this program (segment-gated).",
        "requiredInputsMissing:Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance.",
        "requiredInputsMissing:Interval data reference required for load shape, load shifting, and demand response eligibility",
        "requiredInputsMissing:NAICS code required for this program.",
        "requiredInputsMissing:NAICS code required to match many utility/ISO programs",
        "requiredInputsMissing:Weather series not available; provide weather data or configure provider."
      ],
      "requiredNextData": [
        {
          "code": "required:Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas.",
          "label": "Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas."
        },
        {
          "code": "required:Customer segment/type required to match many utility/ISO programs",
          "label": "Customer segment/type required to match many utility/ISO programs"
        },
        {
          "code": "required:Customer type required for this program (segment-gated).",
          "label": "Customer type required for this program (segment-gated)."
        },
        {
          "code": "required:Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance.",
          "label": "Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance."
        },
        {
          "code": "required:Interval data reference required for load shape, load shifting, and demand response eligibility",
          "label": "Interval data reference required for load shape, load shifting, and demand response eligibility"
        },
        {
          "code": "required:NAICS code required for this program.",
          "label": "NAICS code required for this program."
        },
        {
          "code": "required:NAICS code required to match many utility/ISO programs",
          "label": "NAICS code required to match many utility/ISO programs"
        },
        {
          "code": "required:Weather series not available; provide weather data or configure provider.",
          "label": "Weather series not available; provide weather data or configure provider."
        }
      ],
      "status": "LIMITED"
    },
    "dataQuality": {
      "missingInfoIds": [
        "behaviorV2.baseLoadDrift.unavailable",
        "behaviorV2.insufficientCycles",
        "behaviorV2.peaks.missing",
        "behaviorV2.weekendShare.insufficientMonths",
        "behaviorV3.electric.insufficientMonths",
        "billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
        "billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
        "determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY",
        "determinants.reconcile.billingRecords.missing",
        "determinants.reconcile.coverageLow.2026-01",
        "determinants.reconcile.coverageLow.2026-02",
        "determinants.reconcile.reconcilable.count",
        "determinants.tou.energy.coverage.low.2026-01",
        "determinants.tou.energy.coverage.low.2026-02",
        "loadAttribution.weather.missing",
        "supply.v1.lse_undetected",
        "tariff.applicability.voltage.unknown",
        "weather.interval.temperature.missing"
      ],
      "score0to100": 80,
      "warnings": [
        "missing:behaviorV2.baseLoadDrift.unavailable",
        "missing:behaviorV2.insufficientCycles",
        "missing:behaviorV2.peaks.missing",
        "missing:behaviorV2.weekendShare.insufficientMonths",
        "missing:behaviorV3.electric.insufficientMonths",
        "missing:billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
        "missing:billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
        "missing:determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY",
        "missing:determinants.reconcile.billingRecords.missing",
        "missing:determinants.reconcile.coverageLow.2026-01"
      ]
    },
    "findings": [
      {
        "confidence0to1": 0.9,
        "evidenceRefs": [
          "analysisRun:run_golden_01:reportJson.missingInfo"
        ],
        "id": "missing_info",
        "severity": "warning",
        "summaryBullets": [
          "Missing IDs: behaviorV2.baseLoadDrift.unavailable, behaviorV2.insufficientCycles, behaviorV2.peaks.missing, behaviorV2.weekendShare.insufficientMonths, behaviorV3.electric.insufficientMonths, billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT, billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT, determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY, determinants.reconcile.billingRecords.missing, determinants.reconcile.coverageLow.2026-01, determinants.reconcile.coverageLow.2026-02, determinants.reconcile.reconcilable.count…"
        ],
        "title": "Missing info (reduces certainty)"
      },
      {
        "confidence0to1": 0.75,
        "evidenceRefs": [
          "analysisRun:run_golden_01:reportJson.summary.json.rateFit.status"
        ],
        "id": "rate_fit",
        "severity": "warning",
        "summaryBullets": [
          "Status: ok"
        ],
        "title": "Rate fit status"
      },
      {
        "confidence0to1": 0.7,
        "evidenceRefs": [
          "analysisRun:run_golden_01:reportJson.batteryDecisionPackV1_2"
        ],
        "id": "battery_screening",
        "severity": "info",
        "summaryBullets": [
          "Recommendation tier: DO_NOT_PROCEED",
          "Selected candidate: CAND_50KW_1H"
        ],
        "title": "Battery screening"
      },
      {
        "confidence0to1": 0.8,
        "evidenceRefs": [
          "analysisRun:run_golden_01:reportJson.summary.json.building.currentRateCode"
        ],
        "id": "current_rate",
        "severity": "info",
        "summaryBullets": [
          "Rate: B-19"
        ],
        "title": "Current rate code"
      },
      {
        "confidence0to1": 0.95,
        "evidenceRefs": [
          "analysisRun:run_golden_01:session.inputsSummary"
        ],
        "id": "dq_inputs",
        "severity": "info",
        "summaryBullets": [
          "Score: 80/100",
          "Intervals: present",
          "Bill text: present",
          "Address: missing"
        ],
        "title": "Data completeness"
      },
      {
        "confidence0to1": 0.1,
        "evidenceRefs": [
          "analysisRun:run_golden_01:workflow.utility.insights.supplyStructure"
        ],
        "id": "supply_structure",
        "severity": "info",
        "summaryBullets": [
          "Supply type: unknown",
          "Confidence: 0.1"
        ],
        "title": "Supply structure"
      },
      {
        "confidence0to1": 0.85,
        "evidenceRefs": [
          "analysisRun:run_golden_01:reportJson.truthSnapshotV1"
        ],
        "id": "truth_building_story",
        "severity": "info",
        "summaryBullets": [
          "Truth Engine confidence: A"
        ],
        "title": "Building story (Truth Engine v1)"
      },
      {
        "confidence0to1": 0.85,
        "evidenceRefs": [
          "analysisRun:run_golden_01:reportJson.project.territory"
        ],
        "id": "utility_territory",
        "severity": "info",
        "summaryBullets": [
          "Territory: PGE"
        ],
        "title": "Utility territory"
      }
    ],
    "missingInfoSummary": {
      "recommended": [
        {
          "category": "tariff",
          "description": "Base load drift unavailable (insufficient reconcilable months).",
          "id": "behaviorV2.baseLoadDrift.unavailable",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Insufficient reconcilable overlap cycles for multi-year behavior insights (need >= 12).",
          "id": "behaviorV2.insufficientCycles",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Peak timing unavailable (missing determinant timestamps for kW maxima).",
          "id": "behaviorV2.peaks.missing",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Weekend share comparison requires >= 24 reconcilable months.",
          "id": "behaviorV2.weekendShare.insufficientMonths",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Insufficient reconcilable overlap months for electric behavior insights (need >= 12).",
          "id": "behaviorV3.electric.insufficientMonths",
          "severity": "RECOMMENDED"
        },
        {
          "category": "billing",
          "description": "TOU kW buckets were not explicitly labeled (need at least two of: Peak/Off-Peak/Partial-Peak/Super-Off-Peak kW).",
          "details": {
            "reasonCode": "BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
            "source": "bill_pdf"
          },
          "id": "billing.billPdfTouUsage.BILL_PDF_TOU_DEMAND_NOT_EXPLICIT",
          "severity": "RECOMMENDED"
        },
        {
          "category": "billing",
          "description": "TOU kWh buckets were not explicitly labeled (need at least two of: Peak/Off-Peak/Partial-Peak/Super-Off-Peak kWh).",
          "details": {
            "reasonCode": "BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
            "source": "bill_pdf"
          },
          "id": "billing.billPdfTouUsage.BILL_PDF_TOU_ENERGY_NOT_EXPLICIT",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "PG&E demand ratchet requires prior-month demand history (11 month window). Provide prior billing cycles or usage history to compute ratchet floor.",
          "details": {
            "historyWindowCycles": 11,
            "reasonCode": "DETERMINANT_RATCHET_NEEDS_HISTORY"
          },
          "id": "determinants.demandRules.pge.ratchet.DETERMINANT_RATCHET_NEEDS_HISTORY",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Billing records missing for reconciliation.",
          "id": "determinants.reconcile.billingRecords.missing",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Insufficient interval coverage to reconcile against billing record.",
          "details": {
            "billedKwh": null,
            "billedKwMax": null,
            "coveragePct": 0.03225806451612903,
            "expectedIntervals": 744,
            "firstIntervalTs": "2026-01-15T08:00:00.000Z",
            "lastIntervalTs": "2026-01-16T07:00:00.000Z",
            "missingPointCount": 720,
            "observedIntervals": 24
          },
          "id": "determinants.reconcile.coverageLow.2026-01",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Insufficient interval coverage to reconcile against billing record.",
          "details": {
            "billedKwh": null,
            "billedKwMax": null,
            "coveragePct": 0.03571428571428571,
            "expectedIntervals": 672,
            "firstIntervalTs": "2026-02-15T08:00:00.000Z",
            "lastIntervalTs": "2026-02-16T07:00:00.000Z",
            "missingPointCount": 648,
            "observedIntervals": 24
          },
          "id": "determinants.reconcile.coverageLow.2026-02",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Only 0 cycles were reconcilable due to limited overlap/coverage.",
          "details": {
            "reconciledCycleCount": 0
          },
          "id": "determinants.reconcile.reconcilable.count",
          "severity": "RECOMMENDED"
        },
        {
          "category": "billing",
          "description": "Insufficient interval coverage for TOU energy breakdown.",
          "details": {
            "coveragePct": 0.03225806451612903,
            "expectedIntervals": 744,
            "firstIntervalTs": "2026-01-15T08:00:00.000Z",
            "lastIntervalTs": "2026-01-16T07:00:00.000Z",
            "observedIntervals": 24
          },
          "id": "determinants.tou.energy.coverage.low.2026-01",
          "severity": "RECOMMENDED"
        },
        {
          "category": "billing",
          "description": "Insufficient interval coverage for TOU energy breakdown.",
          "details": {
            "coveragePct": 0.03571428571428571,
            "expectedIntervals": 672,
            "firstIntervalTs": "2026-02-15T08:00:00.000Z",
            "lastIntervalTs": "2026-02-16T07:00:00.000Z",
            "observedIntervals": 24
          },
          "id": "determinants.tou.energy.coverage.low.2026-02",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Weather data missing in interval export; load attribution unavailable.",
          "id": "loadAttribution.weather.missing",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "LSE (CCA/DA provider) could not be detected from bill text.",
          "id": "supply.v1.lse_undetected",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Voltage level (secondary/primary/transmission) is unknown; provide meter metadata or bill text that indicates service voltage.",
          "id": "tariff.applicability.voltage.unknown",
          "severity": "RECOMMENDED"
        },
        {
          "category": "tariff",
          "description": "Weather data missing in interval export; load attribution unavailable. Include Avg. Temperature in interval export when available.",
          "id": "weather.interval.temperature.missing",
          "severity": "RECOMMENDED"
        }
      ],
      "required": [],
      "warnings": []
    },
    "opportunities": [
      {
        "confidence0to1": 0.65,
        "id": "opp_battery",
        "prerequisites": [],
        "risks": [],
        "tier": "DO_NOT_PROCEED",
        "title": "Battery opportunity (screening)"
      }
    ],
    "provenance": {
      "engineVersions": {},
      "generatedAtIso": "2026-03-01T00:00:00.000Z",
      "projectId": "p_golden_01",
      "reportId": "rs_golden_01",
      "revisionIdsUsed": [
        "rev_01_single_run_with_revision_and_wizard"
      ],
      "runIdsUsed": [
        "run_golden_01"
      ]
    },
    "verifierResultV1": {
      "checks": [
        {
          "code": "verifier.econ.sum_mismatch",
          "details": {
            "delta": 0,
            "sumLineItems": 0,
            "total": 0
          },
          "message": "Battery economics reconcile within tolerance.",
          "paths": [
            "reportJson.batteryDecisionPackV1_2.audit.reconcile"
          ],
          "status": "PASS",
          "tolerance": 0.01
        }
      ],
      "generatedAtIso": "2026-03-01T00:00:00.000Z",
      "status": "PASS",
      "summary": {
        "failCount": 0,
        "passCount": 1,
        "warnCount": 0
      }
    },
    "wizardOutputHash": "9000530522e3d7b0ee32ff52904ab9d1f222c6fb501f12cc97bf92e0c46ff93e",
    "wizardSteps": [
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Optional context that improves auditability and downstream reporting.",
        "id": "project_metadata",
        "requiredActions": [
          {
            "actionId": "project_metadata.ADD_PROJECT_METADATA",
            "apiHint": {
              "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-project-metadata",
              "method": "POST",
              "payloadExample": {
                "address": "123 Main St, City, CA",
                "meterId": "optional",
                "utilityHint": "PGE"
              }
            },
            "label": "Add address and utility account identifiers",
            "required": false,
            "status": "OPTIONAL",
            "type": "ADD_PROJECT_METADATA"
          }
        ],
        "status": "OPTIONAL",
        "title": "Project metadata (optional)"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Used to extract rate labels, billing periods, and TOU hints when available.",
        "id": "bill_pdf",
        "requiredActions": [
          {
            "actionId": "bill_pdf.UPLOAD_BILL_PDF",
            "apiHint": {
              "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/upload-bill",
              "method": "POST",
              "payloadExample": {
                "file": "<multipart/form-data field: file>"
              }
            },
            "label": "Upload bill PDF (extract bill text)",
            "required": false,
            "status": "DONE",
            "type": "UPLOAD_BILL_PDF"
          }
        ],
        "status": "DONE",
        "title": "Bill PDF"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Enables interval-derived load shape, demand, and battery feasibility signals.",
        "id": "interval_data",
        "requiredActions": [
          {
            "actionId": "interval_data.UPLOAD_INTERVAL_CSV",
            "apiHint": {
              "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/upload-interval",
              "method": "POST",
              "payloadExample": {
                "file": "<multipart/form-data field: file>"
              }
            },
            "label": "Upload interval CSV (PG&E exports supported)",
            "required": false,
            "status": "DONE",
            "type": "UPLOAD_INTERVAL_CSV"
          }
        ],
        "status": "DONE",
        "title": "Interval data (CSV)"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Derived from stored interval/weather snapshots only: baseline expectations, residual maps, changepoints, and bounded anomaly ledger.",
        "id": "building_story",
        "requiredActions": [],
        "status": "DONE",
        "title": "Building story (Truth Engine v1)"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "• Frontier points: 4 (bounded)\n• Battery: backup-only (medium) — resilience value not monetized — $0/yr • capex=$171,188 • payback≈0.0y\n• Battery: backup-only (small) — resilience value not monetized — $0/yr • capex=$147,125 • payback≈0.0y\n• Battery: DR-ready mode (requires DR inputs) — $0/yr • capex=$0 • payback≈0.0y\n• Battery: hybrid (TOU + demand) — $0/yr • capex=$147,125 • payback≈0.0y\n• Battery: non-export / interconnection-limited mode — $0/yr • capex=$147,125 • payback≈0.0y\nBlocked scenarios:\n• Battery: demand shaving only — needs: billing_history_12_months, required:Billing cycle summary (start/end dates, demand/usage) requi…(truncated), required:Customer segment/type required to match many utility/ISO programs, required:Customer type required for this program (segment-gated).\nRequired next data (deduped): billing_history_12_months • required:Billing cycle summary (start/end dates, demand/usage) required to compute bill deltas. • required:Customer segment/type required to match many utility/ISO programs • required:Customer type required for this program (segment-gated). • required:Demand charge presence (meterMeta.hasDemandChargesKnown) required to interpret Option S relevance. • required:Interval data reference required for load shape, load shifting, and demand response eligibility • required:NAICS code required for this program. • required:NAICS code required to match many utility/ISO programs • required:Weather series not available; provide weather data or configure provider.",
        "id": "opportunity_frontier",
        "requiredActions": [],
        "status": "DONE",
        "title": "Opportunity Frontier (Scenario Lab v1)"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Required to resolve tariff metadata deterministically when bill matching is unavailable/ambiguous.",
        "id": "rate_code",
        "requiredActions": [
          {
            "actionId": "rate_code.ENTER_RATE_CODE",
            "apiHint": {
              "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-rate-code",
              "method": "POST",
              "payloadExample": {
                "rateCode": "E-19"
              }
            },
            "label": "Enter current rate code (e.g., E-19, B-19)",
            "required": true,
            "status": "DONE",
            "type": "ENTER_RATE_CODE"
          }
        ],
        "status": "DONE",
        "title": "Current rate code"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Improves generation/exit-fee context when analyzing CCA or Direct Access supply.",
        "id": "supply_provider",
        "requiredActions": [
          {
            "actionId": "supply_provider.SELECT_PROVIDER_TYPE",
            "apiHint": {
              "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-provider",
              "method": "POST",
              "payloadExample": {
                "providerType": "NONE"
              }
            },
            "label": "Select supply provider type",
            "required": false,
            "status": "OPTIONAL",
            "type": "SELECT_PROVIDER_TYPE"
          }
        ],
        "status": "OPTIONAL",
        "title": "Supply provider type (CCA/DA/None)"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Selects vintage-specific PCIA deterministically when available.",
        "id": "pcia_vintage",
        "requiredActions": [
          {
            "actionId": "pcia_vintage.SET_PCIA_VINTAGE_KEY",
            "apiHint": {
              "endpoint": "/api/report-sessions-v1/rs_golden_01/inputs/set-pcia-vintage-key",
              "method": "POST",
              "payloadExample": {
                "pciaVintageKey": "2019"
              }
            },
            "label": "Set PCIA vintage key (when known)",
            "required": false,
            "status": "OPTIONAL",
            "type": "SET_PCIA_VINTAGE_KEY"
          }
        ],
        "status": "OPTIONAL",
        "title": "PCIA vintage key (optional)"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Required inputs are missing; resolve required items or explicitly choose “Run anyway” to mark outputs as partial.",
        "id": "run_utility",
        "requiredActions": [],
        "status": "BLOCKED",
        "title": "Run Utility"
      },
      {
        "evidence": {
          "runId": "run_golden_01"
        },
        "helpText": "Builds a deterministic wizard artifact from stored run snapshots (no engine recompute on GET).",
        "id": "build_wizard_output",
        "requiredActions": [],
        "status": "DONE",
        "title": "Build wizard output"
      },
      {
        "evidence": {
          "revisionId": "rev_01_single_run_with_revision_and_wizard",
          "runId": "run_golden_01"
        },
        "helpText": "Optional: attach a rendered revision (HTML/PDF) for sharing.",
        "id": "generate_revision",
        "requiredActions": [],
        "status": "DONE",
        "title": "Generate revision"
      }
    ]
  }
}
