[
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\01_strong_tou_with_demand.json",
    "expected": {
      "confidenceTier": "MEDIUM",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        87020.31,
        87020.31
      ],
      "annualGrossSavings": [
        1775.67,
        1775.67
      ],
      "annualNetSavings": [
        1723.17,
        1723.17
      ],
      "paybackYears": [
        50.500131,
        50.500131
      ],
      "npvUsd": [
        -75961.59,
        -75961.59
      ],
      "normalized": {
        "capexPerKwRange": [
          16575.297143,
          16575.297143
        ],
        "capexPerKwhRange": [
          4143.824286,
          4143.824286
        ],
        "annualNetSavingsPerKwRange": [
          328.222857,
          328.222857
        ],
        "annualNetSavingsPerKwhRange": [
          82.055714,
          82.055714
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          0.067443,
          0.067443
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "battery.econ.ratchet.unavailable",
        "storage.econ.deprecated_use_batteryEconomicsV1"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\02_flat_load_net_non_positive.json",
    "expected": {
      "confidenceTier": "NONE",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        0,
        0
      ],
      "annualGrossSavings": [
        0,
        0
      ],
      "annualNetSavings": [
        0,
        0
      ],
      "paybackYears": [
        0,
        0
      ],
      "npvUsd": [
        0,
        0
      ],
      "normalized": {
        "capexPerKwRange": [
          null,
          null
        ],
        "capexPerKwhRange": [
          null,
          null
        ],
        "annualNetSavingsPerKwRange": [
          null,
          null
        ],
        "annualNetSavingsPerKwhRange": [
          null,
          null
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          0,
          0
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "battery.econ.missing_tariff_inputs",
        "battery.econ.net_savings_non_positive",
        "battery.econ.savings_unavailable_no_tariffengine",
        "storage.econ.deprecated_use_batteryEconomicsV1",
        "storage.econ.v1.missing_demand_determinants",
        "storage.econ.v1.missing_tariff_prices",
        "storage.econ.v1.net_savings_non_positive"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\03_missing_tariff_prices.json",
    "expected": {
      "confidenceTier": "LOW",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        87020.31,
        87020.31
      ],
      "annualGrossSavings": [
        0,
        0
      ],
      "annualNetSavings": [
        -52.5,
        -52.5
      ],
      "paybackYears": [
        0,
        0
      ],
      "npvUsd": [
        -87357.24,
        -87357.24
      ],
      "normalized": {
        "capexPerKwRange": [
          16575.297143,
          16575.297143
        ],
        "capexPerKwhRange": [
          4143.824286,
          4143.824286
        ],
        "annualNetSavingsPerKwRange": [
          -10,
          -10
        ],
        "annualNetSavingsPerKwhRange": [
          -2.5,
          -2.5
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          -0.002055,
          -0.002055
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "battery.econ.missing_tariff_inputs",
        "battery.econ.net_savings_non_positive",
        "battery.econ.ratchet.unavailable",
        "battery.econ.savings_unavailable_no_tariffengine",
        "storage.econ.deprecated_use_batteryEconomicsV1",
        "storage.econ.v1.missing_tariff_prices",
        "storage.econ.v1.net_savings_non_positive"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\04_missing_dispatch_fallback_to_battery_opportunity.json",
    "expected": {
      "confidenceTier": "MEDIUM",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        87020.31,
        87020.31
      ],
      "annualGrossSavings": [
        0,
        0
      ],
      "annualNetSavings": [
        -52.5,
        -52.5
      ],
      "paybackYears": [
        0,
        0
      ],
      "npvUsd": [
        -87357.24,
        -87357.24
      ],
      "normalized": {
        "capexPerKwRange": [
          16575.297143,
          16575.297143
        ],
        "capexPerKwhRange": [
          4143.824286,
          4143.824286
        ],
        "annualNetSavingsPerKwRange": [
          -10,
          -10
        ],
        "annualNetSavingsPerKwhRange": [
          -2.5,
          -2.5
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          -0.002055,
          -0.002055
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "battery.econ.net_savings_non_positive",
        "battery.econ.ratchet.unavailable",
        "battery.econ.savings_unavailable_no_dispatch",
        "storage.econ.deprecated_use_batteryEconomicsV1",
        "storage.econ.v1.missing_dispatch",
        "storage.econ.v1.net_savings_non_positive"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\05_tou_energy_only_determinants_missing.json",
    "expected": {
      "confidenceTier": "MEDIUM",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        87020.31,
        87020.31
      ],
      "annualGrossSavings": [
        515.67,
        515.67
      ],
      "annualNetSavings": [
        463.17,
        463.17
      ],
      "paybackYears": [
        187.87985,
        187.87985
      ],
      "npvUsd": [
        -84047.84,
        -84047.84
      ],
      "normalized": {
        "capexPerKwRange": [
          16575.297143,
          16575.297143
        ],
        "capexPerKwhRange": [
          4143.824286,
          4143.824286
        ],
        "annualNetSavingsPerKwRange": [
          88.222857,
          88.222857
        ],
        "annualNetSavingsPerKwhRange": [
          22.055714,
          22.055714
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          0.018128,
          0.018128
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.demand_savings_unavailable_missing_determinants",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "storage.econ.deprecated_use_batteryEconomicsV1",
        "storage.econ.v1.missing_demand_determinants"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\06_weekend_heavy_tou_small_savings.json",
    "expected": {
      "confidenceTier": "MEDIUM",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        76673.44,
        76673.44
      ],
      "annualGrossSavings": [
        133.47,
        133.47
      ],
      "annualNetSavings": [
        115.97,
        115.97
      ],
      "paybackYears": [
        661.148918,
        661.148918
      ],
      "npvUsd": [
        -75929.18,
        -75929.18
      ],
      "normalized": {
        "capexPerKwRange": [
          43813.394286,
          43813.394286
        ],
        "capexPerKwhRange": [
          10953.348571,
          10953.348571
        ],
        "annualNetSavingsPerKwRange": [
          66.268571,
          66.268571
        ],
        "annualNetSavingsPerKwhRange": [
          16.567143,
          16.567143
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          0.015886,
          0.015886
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.demand_savings_unavailable_missing_determinants",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "storage.econ.deprecated_use_batteryEconomicsV1",
        "storage.econ.v1.missing_demand_determinants"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\07_capex_override_confidence_higher.json",
    "expected": {
      "confidenceTier": "MEDIUM",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        80740,
        80740
      ],
      "annualGrossSavings": [
        1775.67,
        1775.67
      ],
      "annualNetSavings": [
        564.57,
        564.57
      ],
      "paybackYears": [
        143.011495,
        143.011495
      ],
      "npvUsd": [
        -76051.68,
        -76051.68
      ],
      "normalized": {
        "capexPerKwRange": [
          15379.047619,
          15379.047619
        ],
        "capexPerKwhRange": [
          3844.761905,
          3844.761905
        ],
        "annualNetSavingsPerKwRange": [
          107.537143,
          107.537143
        ],
        "annualNetSavingsPerKwhRange": [
          26.884286,
          26.884286
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          0.022097,
          0.022097
        ]
      },
      "warnings": [
        "battery.econ.dr_value_unknown",
        "battery.econ.ratchet.unavailable",
        "storage.econ.deprecated_use_batteryEconomicsV1"
      ],
      "missingInfo": []
    }
  },
  {
    "fixtureFile": "tests\\fixtures\\storageEconomics\\v1\\cases\\08_normalized_metrics_invariants.json",
    "expected": {
      "confidenceTier": "MEDIUM",
      "engineVersion": "storage_econ_v1.0",
      "capexTotal": [
        87020.31,
        87020.31
      ],
      "annualGrossSavings": [
        1460.67,
        1460.67
      ],
      "annualNetSavings": [
        1408.17,
        1408.17
      ],
      "paybackYears": [
        61.796736,
        61.796736
      ],
      "npvUsd": [
        -77983.16,
        -77983.16
      ],
      "normalized": {
        "capexPerKwRange": [
          16575.297143,
          16575.297143
        ],
        "capexPerKwhRange": [
          4143.824286,
          4143.824286
        ],
        "annualNetSavingsPerKwRange": [
          268.222857,
          268.222857
        ],
        "annualNetSavingsPerKwhRange": [
          67.055714,
          67.055714
        ],
        "annualNetSavingsPerAnnualKwhRange": [
          0.055114,
          0.055114
        ]
      },
      "warnings": [
        "battery.econ.capex_defaults_used",
        "battery.econ.dr_value_unknown",
        "battery.econ.finance_missing_discount_rate",
        "battery.econ.missing_capex_inputs",
        "battery.econ.ratchet.unavailable",
        "storage.econ.deprecated_use_batteryEconomicsV1"
      ],
      "missingInfo": [
        "storage.econ.v1.capex_defaults_used",
        "storage.econ.v1.discount_rate_default_used"
      ]
    }
  }
]

